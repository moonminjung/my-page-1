<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <title>부산 미세먼지 수치</title>

    <style>
      * {
        margin: 0;
        padding: 0;
      }

      .top {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .nav {
        display: flex;
        gap: 30px;
        align-items: center;
      }

      .nav1 {
        font-weight: bold;
        font-size: 20px;
      }

      .logo-img {
        width: 45px;
      }

      .search-bar {
        align-items: center;
        gap: 0px 0px;
        font-weight: bold;
      }

      .button {
        border: none;
      }

      .main {
        position: relative;
      }

      .main-img {
        width: 100vw;
        height: 30vw;
        vertical-align: middle;
        mask-image: linear-gradient(
          to top,
          rgba(20, 20, 20, 0) 0%,
          rgba(20, 20, 20, 0.25) 25%,
          rgba(20, 20, 20, 0.5) 50%,
          rgba(20, 20, 20, 0.75) 75%,
          rgba(20, 20, 20, 1) 100%
        );
      }

      .table {
        margin-top: 50px;
        margin-bottom: 50px;
        text-align: center;
      }

      .table-button {
        text-align: center;
        display: flex;
        justify-content: center;
        gap: 20px;
      }

      .page-button {
        border: none;
      }

      .main-text {
        position: absolute;
        top: 40%;
        left: 50%;
        width: 100%;
        transform: translate(-50%, -50%);
        text-align: center;

        font-size: 50px;
        font-weight: bold;
        color: azure;
      }
      .empty-box {
        margin-top: 100px;

        text-align: center;
      }

      .empty-box1 {
        width: 100vw;
        height: 5vw;
        background: skyblue;
        background: linear-gradient(to top, #79aaff, white);
      }

      .empty-box2 {
        width: 100vw;
        height: 5vw;
        background: skyblue;
        background: linear-gradient(to bottom, #79aaff, white);
      }

      .sub-text {
        font-weight: bold;
        font-size: 20px;
        text-align: center;
      }

      .sub-img {
        margin: 0 auto;
        width: 70vw;
      }

      .sub-logo-img {
        margin-top: 5px
      }


    </style>
  </head>
  <body>
    <div class="top">
      <div class="nav">
        <img class="logo-img" src="./img/logo.png" alt="로고" />
        <div class="nav1">menu1</div>
        <div class="nav1">menu2</div>
        <div class="nav1">menu3</div>
        <div class="nav1">menu4</div>
      </div>
      <div class="search-bar">
        지역 검색
        <input type="text" />
        <button class="button">
          <img src=".\img\돋보기.jpg" width="30px" />
        </button>
      </div>
    </div>
    <div class="main">
      <img class="main-img" src="./img/sky.jpg" />
      <div class="main-text">부산광역시 실시간 대기질 측정 정보</div>
    </div>
    <div class="info">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">측정소</th>
            <th scope="col">초미세먼지 지수</th>
            <th scope="col">초미세먼지(㎍/㎥)</th>
            <th scope="col">미세먼지 지수</th>
            <th scope="col">미세먼지(㎍/㎥)</th>
          </tr>
        </thead>
        <tbody id="Contents">
        </tbody>
      </table>
    </div>
    <div class="table-button">
        <button class="page-button" onclick="prevPage()">◀</button>
        <button class="page-button" onclick="nextPage()">▶</button>
    </div>
    <div class="empty-box">
      <div class="empty-box1"></div>
      <div class="empty-box2"></div>
    </div>

    <div class="other-contents">
      <div class="sub-text">부산광역시에서 제공하는 다른 서비스</div>
      <div class="sub-img">
        <button class = "sub-logo-img" type="button">
          <img src="./img/날씨.jpg" alt="대체 텍스트" onclick="location.href='https://www.kma.go.kr/busan/html/main/index.jsp'" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>
        <button class = "sub-logo-img" type="button">
          <img src="https://placehold.co/250x250" alt="대체 텍스트" onclick="" >
        </button>

      </div>

    </div>
  </body>
  <script>
    const getData = (page) => {
      const ContentsTag = document.getElementById("Contents");
      ContentsTag.innerHTML = "";
      fetch(
        `https://apis.data.go.kr/6260000/AirQualityInfoService/getAirQualityInfoClassifiedByStation?serviceKey=HHPOHxC84%2FL92UywaaaZPUsUe9%2FOCfT%2FqBINjhXnJqcHGcDV6adnzNKwIHw6tLZH45J2DMQL40srokRID5wHJg%3D%3D&resultType=json&pageNo=${page}`,
        {
          method: "GET",
        }
      )
        .then((response) => response.json()) // json이라는 data가 오면, java script 객체로 바꿔주는 역할
        .then((data) => {
          console.log(data);
          const list =
            data.getAirQualityInfoClassifiedByStation.body.items.item;
          console.log(list);
          for (let index = 0; index < list.length; index++) {
            ContentsTag.insertAdjacentHTML(
              "beforeend",
              `<tr>
                    <th scope="row">${list[index].site}</th>
                    <td>${list[index].pm25Cai}</td>
                    <td>${list[index].pm25}㎍/㎥</td>
                    <td>${list[index].pm10Cai}</td>
                    <td>${list[index].pm10}㎍/㎥</td>
                </tr>`
            );
          }
        });
      console.log(page);
    };

    let page = 1;

    const nextPage = () => {
      if (page === 10) {
        alert("마지막 페이지 입니다.");
        return 0;
      }

      page = page + 1;
      getData(page);
    };

    const prevPage = () => {
      if (page === 1) {
        alert("첫 페이지 입니다.");
        return 0;
      }

      page = page - 1;
      getData(page);
    };

    getData(page);
  </script>
</html>
